<nav class="navbar navbar-expand-lg navbar-dark custom-navbar">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center" (click)="refreshPage()" style="cursor: pointer;">
      <img src="assets/Heading.png" alt="Logo" width="80" class="me-2 nav-img" />
    </a>
    <div class="flex-grow-1"></div>

    <!-- Search container now handles suggestions -->
    <div class="search-container me-3">
      <form class="search-pill-form" (ngSubmit)="onSearchSubmit()">
        <div class="search-pill">
          <!-- Added (input) and (focus) events to trigger suggestions -->
          <input class="search-input" 
                 [(ngModel)]="idea_search_input" 
                 name="searchInput" 
                 (input)="onSearchInput()" 
                 (focus)="onSearchInput()" 
                 type="search" 
                 placeholder="Search ideas..." 
                 aria-label="Search" 
                 autocomplete="on" />
          <button class="search-button" type="submit">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </form>
      <!-- Suggestions Dropdown -->
      <div class="search-suggestions-container" *ngIf="isSuggestionsVisible && suggestions.length > 0">
        <ul class="suggestions-list">
          <li *ngFor="let suggestion of suggestions" class="suggestion-item" (click)="selectSuggestion(suggestion)">
            {{ suggestion }}
          </li>
        </ul>
      </div>
    </div>

    <!-- Profile section with dropdown -->
    <div class="profile-section dropdown" (click)="toggleDropdown($event)">
      <button class="btn btn-outline-light rounded-circle profile-btn">
        <i class="bi bi-person-circle"></i>
      </button>

      <div class="dropdown-menu" [class.show]="isDropdownOpen" (click)="$event.stopPropagation()">
        <a class="dropdown-item" (click)="openProfilePanel()">
          <i class="bi bi-person-badge-fill"></i> User Profile
        </a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item logout" (click)="logout()">
          <i class="bi bi-box-arrow-right"></i> Logout
        </a>
      </div>
    </div>
  </div>
</nav>

<app-user-profile *ngIf="isProfilePanelOpen" (closeProfile)="closeProfilePanel()"></app-user-profile>
